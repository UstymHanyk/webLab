<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"> -->
  </head>
  <body>
    <div class="container">
      <h1>Edit Gemstone</h1>
      <input type="text" id="edit-gemstone-name" placeholder="Gemstone Name" />
      <input type="number" id="edit-gemstone-carats" placeholder="Carats" />
      <input type="number" id="edit-gemstone-price" placeholder="Price" />
      <button id="save-edited-gemstone">Save Changes</button>
    </div>
    <script src="script.js"></script>
    <script>
        let gemstoneIndexToEdit = null;

function loadGemstoneToEdit() {
  const urlParams = new URLSearchParams(window.location.search);
  
  gemstoneIndexToEdit = parseInt(urlParams.get('index'));
  console.log(gemstoneIndexToEdit)

  if (gemstoneIndexToEdit !== null && !isNaN(gemstoneIndexToEdit)) {
  console.log(data)

    const gemstone = data[gemstoneIndexToEdit];
    document.getElementById('edit-gemstone-name').value = gemstone.name;
    document.getElementById('edit-gemstone-carats').value = gemstone.carats;
    document.getElementById('edit-gemstone-price').value = gemstone.price;
  } else {
    alert('Invalid gemstone index.');
  }
}

function saveEditedGemstone() {
  if (gemstoneIndexToEdit !== null) {
    const name = document.getElementById('edit-gemstone-name').value;
    const carats = parseFloat(document.getElementById('edit-gemstone-carats').value);
    const price = parseFloat(document.getElementById('edit-gemstone-price').value);

    if (!isNaN(carats) && !isNaN(price) && name) {
      const editedGemstone = new Gemstone(name, carats, price);
      data[gemstoneIndexToEdit] = editedGemstone;
      localStorage.setItem('gemstones', JSON.stringify(data));

      window.location.href = 'index.html';
    } else {
      alert('Invalid input. Please provide valid gemstone name, carats, and price.');
    }
  }
}

const saveEditedGemstoneBtn = document.getElementById('save-edited-gemstone');
saveEditedGemstoneBtn.addEventListener('click', saveEditedGemstone);

loadGemstoneToEdit();

    </script>
  </body>
</html>
